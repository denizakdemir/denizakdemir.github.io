<!-- GitHub Repositories Section -->
<div class="repositories-section my-5">
  <h2 class="text-center mb-4">My GitHub Repositories</h2>
  <div id="github-repos" class="repositories-container">
    <p class="text-center mb-3">Loading repositories...</p>
  </div>
</div>

<script>
// GitHub Repositories Loader
document.addEventListener('DOMContentLoaded', function() {
  const username = 'denizakdemir';
  const reposContainer = document.getElementById('github-repos');
  
  // Function to format the repository HTML
  function formatRepo(repo) {
    return `
      <div class="card mb-3 p-3">
        <h3 class="h5"><a href="${repo.html_url}" target="_blank" rel="noopener">${repo.name}</a></h3>
        <p class="mb-2">${repo.description || 'No description available'}</p>
        <div class="small text-muted">
          ${repo.language ? `<span class="me-3">${repo.language}</span>` : ''}
          <span class="me-3">‚≠ê ${repo.stargazers_count}</span>
          <span>üî± ${repo.forks_count}</span>
        </div>
      </div>
    `;
  }

  // Fallback to JSONP approach (works around CORS issues)
  function loadReposWithJSONP() {
    const script = document.createElement('script');
    script.src = `https://api.github.com/users/${username}/repos?callback=displayGitHubRepos&sort=updated`;
    document.body.appendChild(script);
  }
  
  // Callback for JSONP
  window.displayGitHubRepos = function(response) {
    if (response.data && Array.isArray(response.data)) {
      displayRepos(response.data);
    } else {
      reposContainer.innerHTML = '<p class="text-center text-danger">Error loading repositories. Please try again later.</p>';
      console.error('GitHub API error:', response);
    }
  };
  
  // Function to display repositories
  function displayRepos(repos) {
    if (!repos || repos.length === 0) {
      reposContainer.innerHTML = '<p class="text-center">No repositories found.</p>';
      return;
    }
    
    // Sort by stars (most stars first)
    repos.sort((a, b) => b.stargazers_count - a.stargazers_count);
    
    // Take top 6 repos
    const topRepos = repos.slice(0, 6);
    
    const reposHTML = topRepos.map(formatRepo).join('');
    reposContainer.innerHTML = reposHTML + 
      `<div class="text-center mt-3">
        <a href="https://github.com/${username}?tab=repositories" class="btn btn-outline-primary" 
           target="_blank" rel="noopener">View All Repositories</a>
      </div>`;
  }
  
  // First try fetch API
  fetch(`https://api.github.com/users/${username}/repos?sort=updated`)
    .then(response => {
      if (!response.ok) throw new Error('Network response was not ok');
      return response.json();
    })
    .then(repos => displayRepos(repos))
    .catch(error => {
      console.warn('Fetch failed, trying JSONP fallback:', error);
      loadReposWithJSONP();
    });
});
</script>