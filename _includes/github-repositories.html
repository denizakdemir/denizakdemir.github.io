<!-- GitHub Repositories Section -->
<div class="repositories-section my-5">
  <h2 class="text-center mb-4">My GitHub Repositories</h2>
  <div id="repositories" class="repositories-container">
    <div class="text-center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p>Loading repositories...</p>
    </div>
  </div>
  <div id="repo-error" class="text-danger text-center mt-3" style="display: none;"></div>
</div>

<script>
async function fetchRepositories() {
  try {
    console.log("Fetching GitHub repositories...");
    const username = 'denizakdemir';
    const apiUrl = `https://api.github.com/users/${username}/repos`;
    
    document.getElementById('repo-error').style.display = 'none';
    
    const response = await fetch(apiUrl);
    if (!response.ok) {
      throw new Error(`GitHub API returned ${response.status}: ${response.statusText}`);
    }
    
    const repositories = await response.json();
    console.log(`Fetched ${repositories.length} repositories`);
    
    if (!repositories || repositories.length === 0) {
      document.getElementById('repositories').innerHTML = '<p class="text-center">No repositories found.</p>';
      return;
    }
    
    // Sort repositories by the number of stars (most stars first)
    repositories.sort((a, b) => b.stargazers_count - a.stargazers_count);
    
    const repoList = repositories
      .map(repo => `
        <div class="repository card mb-3 p-3">
          <h3><a href="${repo.html_url}" target="_blank">${repo.name}</a></h3>
          <p class="repo-description">${repo.description || 'No description available'}</p>
          <div class="repo-stats">
            <span class="repo-language me-3">${repo.language || 'Not specified'}</span>
            <span class="repo-stars me-3">‚≠ê ${repo.stargazers_count}</span>
            <span class="repo-forks">üî± ${repo.forks_count}</span>
          </div>
        </div>
      `)
      .join('');
    
    document.getElementById('repositories').innerHTML = repoList;
  } catch (error) {
    console.error('Error fetching repositories:', error);
    document.getElementById('repositories').innerHTML = '<p class="text-center">Failed to load repositories.</p>';
    const errorElem = document.getElementById('repo-error');
    errorElem.textContent = `Error: ${error.message}`;
    errorElem.style.display = 'block';
  }
}

// Call the function when the page loads
document.addEventListener('DOMContentLoaded', () => {
  console.log("DOM loaded, fetching repositories...");
  fetchRepositories();
});
</script>